{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %}
<title>Password Reset Form</title>
{% endblock title %}

{% block content %}

<body class="hold-transition login-page">
  <div class="login-box">
    <div class="login-logo">
      <b>Student</b> Management System
    </div>
    <!-- /.login-logo -->
    <div class="card">
      <div class="card-body login-card-body">
        {% if validlink %}
        <p class="login-box-msg">You are only one step a way from your new password, recover your password now.</p>
        <form action="." method="post">
          {% csrf_token %}
          <div class="form-group">
            {{ form|crispy }}
          </div>
          <div class="row">
            <div class="col-12">
              <button type="submit" class="btn btn-primary btn-block">Change password</button>
            </div>
            <!-- /.col -->
          </div>
        </form>
        {% else %}
        <p>Password reset failed.</p>
        <p>The password reset link was invalid, possibly because it has already been used. Please request a new password
          reset.</p>
        <p class="mb-1">
          <a href="{% url 'password_reset' %}">Request a new password reset</a>
        </p>  
        {% endif %}
        <p class="mb-1">
          <a href="{% url 'accounts:login' %}">Login</a>
        </p>
      </div>
      <!-- /.login-card-body -->
    </div>
  </div>
  <!-- /.login-box -->

  <!-- scripts -->
  {% include 'scripts.html' %}

</body>

{% endblock content %}